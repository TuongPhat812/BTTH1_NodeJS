// JavaScript Document
//Bước 1 :khởi tạo Express
var express = require("express");
var app = express();
//khoi tao doi tuong xu ly tap tin
var tt = require("fs");
//Khởi tạo đường dẫn cho thư mục public
var publicDir = require("path").join(__dirname, "/public");
app.use(express.static(publicDir));
//tạo đối tượng loại hoa
var lh = require("./xuly/loaihoa");
//Bước 2 :Tạo hàm
app.get("/", function (req, res) {
  noidung = tt.readFileSync(__dirname + "/templete/index.html").toString();
  //Thay doi thong tin $loaihoa= kết quả xu ly
  ttlh = lh.select();
  hienthi = lh.hienthihoa();
  noidung = noidung.replace("$loaihoa", ttlh);
  noidung = noidung.replace("$dshoa", hienthi);
  res.send(noidung);
});
//Tạo routing với đường dẫn thay doi
// app.get("/:loaihoa", function (req, res) {
//   res.send(req.params.loaihoa);
// });
app.get("/trang_1", function (req, res) {
  noidung = tt.readFileSync(__dirname + "/templete/index.html").toString();
  //Thay doi thong tin $loaihoa= kết quả xu ly
  ttlh = lh.select();
  hienthi = lh.hienthihoa();
  noidung = noidung.replace("$loaihoa", ttlh);
  noidung = noidung.replace("$dshoa", hienthi);
  res.send(noidung);
});
app.get("/trang_1/:id", function (req, res) {
  noidung = tt
    .readFileSync(__dirname + "/templete/trang_chi_tiet_hoa.html")
    .toString();

  res.send(noidung);
});
//Bước 3: lắng nghe yêu cầu từ client
app.listen(3000);
